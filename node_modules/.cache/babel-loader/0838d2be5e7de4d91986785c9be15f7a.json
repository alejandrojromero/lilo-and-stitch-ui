{"ast":null,"code":"import _defineProperty from \"/Users/alejandro/Desktop/development/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/alejandro/Desktop/development/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleRemoveFromCart = (e, product) => {\n      this.setState(state => {\n        const cartItems = state.cartItems.filter(a => a.id !== product.id);\n        localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    this.handleAddToCart = (e, product) => {\n      this.setState(state => {\n        const cartItems = state.cartItems;\n        let productAlreadyInCart = false;\n        cartItems.forEach(cp => {\n          if (cp.id === product.id) {\n            cp.count += 1;\n            productAlreadyInCart = true;\n          }\n        });\n\n        if (!productAlreadyInCart) {\n          cartItems.push(_objectSpread({}, product, {\n            count: 1\n          }));\n        }\n\n        localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    this.listProducts = () => {\n      this.setState(state => {\n        if (state.sort !== '') {\n          state.products.sort((a, b) => state.sort === 'lowestprice' ? a.price > b.price ? 1 : -1 : a.price < b.price ? 1 : -1);\n        } else {\n          state.products.sort((a, b) => a.id > b.id ? 1 : -1);\n        }\n\n        if (state.size !== '') {\n          return {\n            filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0)\n          };\n        }\n\n        return {\n          filteredProducts: state.products\n        };\n      });\n    };\n\n    this.handleSortChange = e => {\n      this.setState({\n        sort: e.target.value\n      });\n      this.listProducts();\n    };\n\n    this.handleSizeChange = e => {\n      this.setState({\n        size: e.target.value\n      });\n      this.listProducts();\n    };\n\n    this.state = {\n      size: '',\n      sort: '',\n      cartItems: [],\n      products: [],\n      filteredProducts: []\n    };\n  }\n\n  componentWillMount() {\n    if (localStorage.getItem('cartItems')) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem('cartItems'))\n      });\n    }\n\n    fetch('http://localhost:8000/products').then(res => res.json()).catch(err => fetch('db.json').then(res => res.json()).then(data => data.products)).then(data => {\n      this.setState({\n        products: data\n      });\n      this.listProducts();\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"E-commerce Shopping Cart Application\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(Filter, {\n      count: this.state.filteredProducts.length,\n      handleSortChange: this.handleSortChange,\n      handleSizeChange: this.handleSizeChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Products, {\n      products: this.state.filteredProducts,\n      handleAddToCart: this.handleAddToCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Basket, {\n      cartItems: this.state.cartItems,\n      handleRemoveFromCart: this.handleRemoveFromCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/alejandro/Desktop/development/src/App.js"],"names":["React","Component","Products","Filter","Basket","App","constructor","handleRemoveFromCart","e","product","setState","state","cartItems","filter","a","id","localStorage","setItem","JSON","stringify","handleAddToCart","productAlreadyInCart","forEach","cp","count","push","listProducts","sort","products","b","price","size","filteredProducts","availableSizes","indexOf","toUpperCase","handleSortChange","target","value","handleSizeChange","componentWillMount","getItem","parse","fetch","then","res","json","catch","err","data","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\n\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = { size: '', sort: '', cartItems: [], products: [], filteredProducts: [] };\n  }\n  componentWillMount() {\n\n    if (localStorage.getItem('cartItems')) {\n      this.setState({ cartItems: JSON.parse(localStorage.getItem('cartItems')) });\n    }\n\n    fetch('http://localhost:8000/products').then(res => res.json())\n      .catch(err => fetch('db.json').then(res => res.json()).then(data => data.products))\n      .then(data => {\n        this.setState({ products: data });\n        this.listProducts();\n      });\n  }\n\n  handleRemoveFromCart = (e, product) => {\n    this.setState(state => {\n      const cartItems = state.cartItems.filter(a => a.id !== product.id);\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    })\n  }\n\n  handleAddToCart = (e, product) => {\n    this.setState(state => {\n      const cartItems = state.cartItems;\n      let productAlreadyInCart = false;\n\n      cartItems.forEach(cp => {\n        if (cp.id === product.id) {\n          cp.count += 1;\n          productAlreadyInCart = true;\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartItems.push({ ...product, count: 1 });\n      }\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    });\n  }\n\n  listProducts = () => {\n    this.setState(state => {\n      if (state.sort !== '') {\n        state.products.sort((a, b) =>\n          (state.sort === 'lowestprice'\n            ? ((a.price > b.price) ? 1 : -1)\n            : ((a.price < b.price) ? 1 : -1)));\n      } else {\n        state.products.sort((a, b) => (a.id > b.id) ? 1 : -1);\n      }\n      if (state.size !== '') {\n        return { filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0) };\n      }\n      return { filteredProducts: state.products };\n    })\n  }\n  handleSortChange = (e) => {\n    this.setState({ sort: e.target.value });\n    this.listProducts();\n  }\n  handleSizeChange = (e) => {\n    this.setState({ size: e.target.value });\n    this.listProducts();\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <h1>E-commerce Shopping Cart Application</h1>\n        <hr />\n        <div className=\"row\">\n          <div className=\"col-md-9\">\n            <Filter count={this.state.filteredProducts.length} handleSortChange={this.handleSortChange}\n              handleSizeChange={this.handleSizeChange} />\n            <hr />\n            <Products products={this.state.filteredProducts} handleAddToCart={this.handleAddToCart} />\n          </div>\n          <div className=\"col-md-3\">\n            <Basket cartItems={this.state.cartItems} handleRemoveFromCart={this.handleRemoveFromCart} />\n          </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}